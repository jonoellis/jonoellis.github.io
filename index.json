---
layout: null
---
[
{% for post in site.posts %}
    {% assign content = post.content | strip_html | strip_newlines | replace: '&lt;', '<' | replace: '&gt;', '>' | replace: '&amp;', '&' | replace: '&nbsp;', ' ' | replace: '&#39;', '\'' %}
    
    {% assign is_valid_json = true %}
    
    {% if content contains '\\' or content contains '"' %}
        {% assign is_valid_json = false %}
    {% endif %}

    {% if is_valid_json %}
        {% assign escaped_content = content | escape %}
    {% else %}
        {% assign escaped_content = "UNINDEXED" %}
    {% endif %}

    {
        "id": "{{ post.id }}",
        "title": "{{ post.title | escape }}",
        "content": "{{ escaped_content }}",
        "url": "{{ post.url }}"
    }{% if forloop.last == false %},{% endif %}
{% endfor %}
]
