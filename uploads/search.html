---
layout: default
title: Search
---

{% include head.html %}

<div class="search-container">
    <h1>Search</h1>
    <input type="text" id="search-input" placeholder="Search..." />
    <button id="search-button">Search</button>
    <div id="search-results"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
<script>
    let searchIndex;

    // Fetch the index.json file and build the search index
    fetch('/index.json')
        .then(response => response.json())
        .then(data => {
            searchIndex = lunr(function () {
                this.ref('id');
                this.field('title');
                this.field('content');

                data.forEach(function (doc) {
                    this.add(doc);
                }, this);
            });
        });

    // Function to perform the search
    function performSearch() {
        const query = document.getElementById('search-input').value;
        const results = searchIndex.search(query);
        const resultsContainer = document.getElementById('search-results');
        resultsContainer.innerHTML = '';

        if (results.length > 0) {
            results.forEach(result => {
                const post = data.find(doc => doc.id === result.ref);
                const resultItem = document.createElement('div');
                resultItem.innerHTML = `<a href="${post.url}">${post.title}</a>`;
                resultsContainer.appendChild(resultItem);
            });
        } else {
            resultsContainer.innerHTML = '<p>No results found.</p>';
        }
    }

    // Add event listener to the search button
    document.getElementById('search-button').addEventListener('click', performSearch);
</script>

{% include footer.html %}
